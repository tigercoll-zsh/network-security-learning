# Day021：操作系统与脚本 - 第 3 周综合实验与测评（OS+枚举+脚本，傻瓜版能照做）

- 日期：2026-01-14
- 周次：第 3 周

## 学习目标

今天把第 3 周收口，你应该能做到：

- 主机侧：能给出 Windows/Linux 各 5 条加固项（并有证据）
- 网络侧：能对“授权目标”做一次端口/服务枚举并导出结果
- 脚本侧：能把输出整理成结构化文件（CSV/JSON），形成可复用“小工具”

## 实践任务（合法授权范围内）

> 本周周报的关键词：**证据链**。没有证据的结论都算没做。

### 任务 1（必做）：Windows 自查证据

- 管理员组成员：`Get-LocalGroupMember Administrators`
- 登录事件：4624/4625 任意一类 `Get-WinEvent ...`
- 入站规则或监听端口：`Get-NetFirewallRule` / `Get-NetTCPConnection`

### 任务 2（可选加分）：Linux 自查证据（自建/授权环境）

- 权限证据：`ls -l /etc/shadow`
- 监听端口：`ss -lntup`
- 日志证据：`tail -n 50 /var/log/auth.log` 或 `journalctl -u ssh`

### 任务 3（必做）：授权目标枚举证据（Nmap）

- 扫描命令与输出：`scripts/day019_nmap.txt`
- 至少挑 1 个开放端口做交叉验证（curl/脚本）

### 任务 4（必做）：脚本成果归档

- PowerShell：Day017 的 CSV 输出（或你自己改进版）
- Python：Day018 的解析脚本（和 JSON 输出）

## 巩固练习（题与复盘）

### 题 1：总结本周最有价值的 3 条经验

**要求**：每条都要配一个“证据来源”。

### 题 2：完善脚本库的 README 与使用说明

**要求**：至少写清 3 个脚本怎么跑、输入输出是什么、常见错误怎么排。

## 评估标准（达成判定）

- 周报包含：授权范围、证据链、结论、风险、改进项、下周计划
- 至少包含 6 张证据截图（Windows 3 + 枚举 2 + 脚本 1，Linux 可选加分）
- 至少产出 2 个可复用脚本（PowerShell + Python）

## 学习成果达成情况（周报模板，直接填写）

### 1) 授权范围声明（必须写）

- Nmap 目标：
- 授权依据：
- 扫描窗口时间：

### 2) 证据清单（截图/文件）

- Windows：
  - 管理员组：
  - 事件日志：
  - 防火墙/端口：
- Nmap：
  - 输出文件：
  - 交叉验证：
- 脚本：
  - CSV：
  - JSON：
- Linux（可选）：

### 3) 结论与反思

- 我本周最大的收获：
- 我本周最大的坑：
- 我下周最想提升：

### 4) 下周计划（3 条即可）

1.
2.
3.

## 集中参考答案（含思路）

### 题 1 参考答案（示例）

1. “先看攻击面，再谈加固”：我用 `Get-NetTCPConnection -State Listen`/`ss -lntup` 看到了监听端口清单。
2. “日志是证据，不是感觉”：我用事件 ID 4624/4625 导出了登录记录。
3. “枚举要交叉验证”：nmap 识别只是线索，我用 curl/脚本再次验证。

### 题 2 参考答案（README 最小结构）

- 脚本列表
- 每个脚本：用途、输入、输出、示例、常见错误

## 周报示例填写（可照抄）

- 我完成了 Windows 主机自查、对授权目标的端口服务枚举，并把输出用脚本整理成 CSV/JSON，形成了可复用的证据链周报。
