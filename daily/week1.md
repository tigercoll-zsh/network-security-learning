---
title: Week 01：网络与协议基础 - 周度总结
tags:
  - 学习总结
  - 阶段复盘
categories:
  - 网络安全
date: 2026-01-30
---

# Week 01：网络与协议基础 - 周度总结

## 📅 本周学习概览

本周我们完成了网络安全最基础也是最重要的模块——**网络与协议基础**。我们从物理层的网线开始，一路向上，深入理解了数据是如何在互联网中传输、路由、交互和加密的。

这七天的知识是后续 Web 安全、内网渗透和流量分析的基石。如果你能清晰地画出数据包从网卡发出到服务器接收的完整路径，说明你已经入门了。

<!--more-->

---

## 📚 每日核心知识回顾

### Day 001：网络模型与全貌
- **核心模型**：OSI 七层模型（物理、数据链路、网络、传输、会话、表示、应用） vs TCP/IP 四层模型。
- **关键机制**：
  - **封装 (Encapsulation)**：数据下行时每一层加头部（数据 -> 段 -> 包 -> 帧 -> 比特）。
  - **解封装 (Decapsulation)**：数据上行时每一层去头部。
- **寻址**：MAC 地址是身份证（物理，不可变，局域网用），IP 地址是住址（逻辑，可变，互联网用）。

### Day 002：以太网与 ARP
- **局域网通信**：交换机工作在二层，通过维护 **MAC 地址表** 实现点对点转发，隔离冲突域。
- **ARP 协议**：地址解析协议。解决“知道 IP，求 MAC”的问题。
  - **工作流**：广播请求（Who has 1.1?） -> 单播响应（I have 1.1, my MAC is X）。
- **安全隐患**：ARP 无验证机制，容易导致 **ARP 欺骗**（中间人攻击）。

### Day 003：IP、ICMP 与路由
- **IP 协议**：负责寻址和路由选择。
- **子网掩码**：CIDR 表示法（如 `/24`），用于区分 IP 地址中的**网络位**（你是哪个小区的）和**主机位**（你是哪一户）。
- **ICMP**：网络诊断工具。
  - **Ping**：利用 Echo Request/Reply 测试连通性。
  - **Tracert**：利用 TTL 超时机制探测路径上的路由器。

### Day 004：TCP/UDP 与会话
- **TCP (传输控制协议)**：
  - **特性**：面向连接、可靠、流控。
  - **三次握手**：SYN -> SYN+ACK -> ACK（建立可靠连接）。
  - **四次挥手**：FIN -> ACK -> FIN -> ACK（全双工关闭）。
- **UDP (用户数据报协议)**：
  - **特性**：无连接、不可靠、速度快、头部开销小。
  - **场景**：视频直播、DNS 查询、竞技游戏。
- **端口**：区分主机上的不同应用程序（Web=80, SSH=22, RDP=3389）。

### Day 005：DNS 工作流
- **定义**：域名系统（Domain Name System），互联网的电话簿（域名 -> IP）。
- **解析流程**：浏览器缓存 -> 系统 hosts -> 本地 DNS -> 根服务器 -> 顶级域服务器 -> 权威 DNS。
- **查询类型**：
  - **递归查询**：客户端问 Local DNS（帮我查到底）。
  - **迭代查询**：Local DNS 问根/顶级域（踢皮球）。
- **记录类型**：A（IP）、CNAME（别名）、MX（邮件）、NS（权威 DNS）。

### Day 006：HTTP 基础
- **HTTP**：超文本传输协议，无状态。
- **请求方法**：GET（获取资源）、POST（提交数据，参数在 Body）。
- **状态码**：
  - **2xx**：成功（200 OK）。
  - **3xx**：重定向（301 永久，302 临时）。
  - **4xx**：客户端错（404 找不到，403 禁止）。
  - **5xx**：服务端错（500 内部错误，502 网关错误）。
- **身份维持**：Cookie（存储在浏览器）和 Session（存储在服务器）。

### Day 007：HTTPS 与加密
- **HTTPS**：HTTP + SSL/TLS 安全层。
- **加密体系**：**混合加密**。
  - **非对称加密 (RSA/ECC)**：握手阶段使用，用于安全地交换密钥。
  - **对称加密 (AES)**：传输阶段使用，用于快速加密数据。
- **PKI (公钥基础设施)**：
  - **CA**：数字证书认证机构，发证书的“公安局”。
  - **数字证书**：包含公钥和 CA 签名，证明网站身份，防止中间人攻击。

---

## 📝 巩固练习题 (Level 1)

完成以下题目来检验你对第一周内容的掌握程度。

### 一、 概念速查（单选/简答）

1.  **OSI 模型中，负责“路径选择”和“逻辑寻址”的是哪一层？**
    A) 数据链路层
    B) 网络层
    C) 传输层
    D) 应用层
2.  **在 TCP 三次握手中，第二步服务端发送的标志位组合是什么？**
    A) SYN
    B) SYN + ACK
    C) ACK
    D) FIN + ACK
3.  **为什么 `ping` 命令没有端口号的概念？**
4.  **HTTP 状态码 `301` 和 `302` 的主要区别是什么？**
5.  **HTTPS 握手阶段主要使用了哪种类型的加密方式？（对称还是非对称？）**

### 二、 场景分析（实战模拟）

6.  **场景：无法访问网页**
    用户反馈无法访问 `www.baidu.com`，但你能 ping 通 `110.242.68.3`（百度的 IP）。
    *   问题出在哪个协议/服务上？
    *   你应该用什么命令来验证你的猜想？

7.  **场景：ARP 欺骗**
    在局域网中，攻击者向受害者发送伪造的 ARP 响应，声称“我是网关”。
    *   受害者的流量会发给谁？
    *   这会导致什么后果？

8.  **场景：Wireshark 抓包**
    你在抓包时看到大量源 IP 为 `192.168.1.100`，目的端口为 `80` 的 `SYN` 包，但没有收到任何 `SYN+ACK` 回复。
    *   这是什么类型的网络活动？（正常访问？扫描？还是...）

9.  **场景：子网计算**
    你的 IP 是 `192.168.1.50`，子网掩码是 `255.255.255.0`。你想访问 `192.168.1.200`。
    *   这是一个局域网通信还是跨网段通信？
    *   数据包会发给网关还是直接发给目标？

### 三、 深度思考

10. **从浏览器输入 `https://www.baidu.com` 到页面展示，请简述这期间涉及了本周学过的哪些协议（按顺序）？**

---

## 🔑 参考答案

### 一、 概念速查
1.  **B) 网络层** (Layer 3)。
2.  **B) SYN + ACK** (确认收到并同步自己的序列号)。
3.  **ICMP 协议**。Ping 使用的是 ICMP，属于网络层协议，它直接封装在 IP 包里，不需要传输层的端口号（端口号是 TCP/UDP 的概念）。
4.  **永久 vs 临时**。301 是永久重定向（浏览器会缓存新地址，下次不问服务器直接跳）；302 是临时重定向（浏览器下次还得问原地址）。
5.  **非对称加密**（如 RSA）。握手阶段为了安全地协商出“会话密钥”，使用了非对称加密。一旦握手完成，传输数据时改用对称加密（如 AES）。

### 二、 场景分析
6.  **DNS 故障**。
    *   能 Ping 通 IP 说明网络层连通性没问题，无法解析域名说明是 DNS 解析失败。
    *   **验证命令**：`nslookup www.baidu.com` 或 `dig www.baidu.com`。
7.  **流量劫持 / 中间人攻击**。
    *   受害者的流量会发给**攻击者**。
    *   攻击者可以窃听数据（如果是 HTTP）、篡改数据，或者直接断网（DoS）。
8.  **TCP SYN 扫描 / SYN Flood 攻击**。
    *   如果不回复 ACK，说明源主机可能在进行端口扫描（半开放扫描），或者正在对目标发动 DoS 攻击（耗尽目标资源）。
9.  **局域网通信**。
    *   子网掩码 `/24` 说明前三段是网络号。`192.168.1` 是相同的。
    *   直接发给目标（通过 ARP 获取目标的 MAC，然后直接发送），**不经过网关**。

### 三、 深度思考
10. **涉及协议流程**：
    1.  **DNS**：把 `www.baidu.com` 解析成 IP。
    2.  **ARP**：如果 IP 在局域网，查 MAC；如果在公网，查网关 MAC。
    3.  **IP**：路由寻址。
    4.  **TCP**：三次握手建立连接。
    5.  **TLS/SSL**：四次握手建立加密通道。
    6.  **HTTP**：发送 GET 请求，接收 HTML 响应。
    7.  **TCP**：四次挥手断开连接（HTTP/1.1 可能保持连接）。
