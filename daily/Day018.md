# Day018：操作系统与脚本 - Python 脚本入门（文本与网络，傻瓜版能照做）

- 日期：2026-01-11
- 周次：第 3 周

## 学习目标

学完今天你应该能做到：

- 用 Python 读文件、用正则提取字段、输出 JSON/CSV
- 用 **标准库** 发起一个 HTTP GET 请求并解析 JSON
- 写出“不会一报错就崩”的脚本：会用 `try/except` 给出可读错误

## 学习内容

### 1️⃣ 你今天不需要装 requests：标准库就够

- 文件：`pathlib`
- 正则：`re`
- JSON：`json`
- 网络：`urllib.request`

### 2️⃣ try/except 的正确打开方式

你只要记住：

- 不要 `except: pass`（吞掉错误）
- 捕获后要输出“发生了什么 + 怎么修”

## 实践任务（合法授权范围内）

> 今天我们复用 Day017 生成的 demo 日志文件，让你一定能跑通。

### 任务 1（必做）：写脚本解析日志并输出结构化结果

新建文件：`scripts/day018_parse_log.py`

功能要求：

- 读取 `scripts/day017-demo.log`
- 用正则解析 `Time/Level/Msg`
- 输出到 `scripts/day018_log.json`

（我在本周提交里会把这个脚本一并加入。）

### 任务 2（必做）：请求一个公开 JSON API 并提取字段

使用 GitHub 公共 API（不需要 token，频率别太高）：

- `https://api.github.com/repos/Tigercoll/network-security-notes`

脚本里提取：`full_name`、`stargazers_count`、`updated_at`

### 任务 3（可选加分）：把两份结果合并成一个报告

- `report.json` 里包括：日志统计 + API 信息

## 巩固练习（题与复盘）

### 题 1：简述 try/except 的用途与最佳实践

**思路**：用途=防崩 + 给用户看得懂的错误；最佳实践=只抓你能处理的异常 + 打印上下文。

### 题 2：完成一个可配置的日志过滤器

**思路**：从命令行参数传入 `--level ERROR`，只输出 ERROR。

## 评估标准（达成判定）

- `scripts/day018_parse_log.py` 能运行并生成 `day018_log.json`
- 能成功请求一次 API 并打印关键信息
- 出错时能给出可读错误（比如网络不通）

## 学习成果达成情况（由学习者填写）

### 截图与证据

- [ ] 脚本运行输出截图
- [ ] `day018_log.json` 文件存在证据

### 关键命令与输出

- 运行命令：
- 输出关键行：

### 结论与反思

- 我今天把“日志 → 结构化数据”的流程跑通了，这会直接服务后面的扫描/枚举结果整理。

## 集中参考答案（含思路）

### 题 1 参考答案

- try/except 用于捕获运行时错误，避免程序崩溃，并给出可读的错误信息。
- 最佳实践：只捕获你能处理的异常；不要吞错；记录上下文（输入、路径、URL）。

### 题 2 参考答案（思路示例）

- 用 `argparse` 解析 `--level` 参数；解析日志后用 `if row['Level'] == level` 过滤。

## 学习成果示例填写（可照抄）

- 我成功生成了 `scripts/day018_log.json`，并从 GitHub API 拉到了仓库更新时间字段，证明我能用标准库做最小网络请求与解析。
