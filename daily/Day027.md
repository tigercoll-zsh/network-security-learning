---
title: Day027：Webshell 与后渗透基础
tags:
  - 网络安全
  - Webshell
  - 后渗透
categories:
  - 90天安全突击
stage: 筑基
abbrlink: d027
date: 2026-02-18
updated: 2026-01-28
---

# Day027：Webshell 与后渗透基础

## 基本信息

| 项目 | 内容 |
|------|------|
| **所属阶段** | 筑基（第一阶段） |
| **所属周次** | Week 4：XSS 与文件上传 |
| **今日主题** | Webshell 工具与后渗透概念 |
| **预计时间** | 2.5 小时 |
| **难度等级** | 进阶 |

---

## 今日痛点场景

> **场景**：你成功上传了一句话木马，用 curl 能执行命令。但每次都要手动发 POST 请求，太麻烦了！
>
> **问题**：有没有更方便的方式管理 Webshell？拿到 Shell 后下一步该干什么？
>
> **今天的任务**：学习使用 Webshell 管理工具，了解后渗透的基本流程。

---

## 今日目标

- [ ] 学会使用蚁剑连接一句话木马
- [ ] 了解常见 Webshell 管理工具
- [ ] 理解后渗透的基本概念
- [ ] 完成基本的信息收集

**闯关条件**：使用蚁剑成功连接 Webshell 并浏览服务器文件。

---

## 实战任务（先动手！）

### 任务 1：安装蚁剑（20 分钟）

**下载蚁剑**：

GitHub: https://github.com/AntSwordProject/antSword

**安装步骤**：
1. 下载 Loader（加载器）
2. 解压后运行
3. 首次运行会要求下载核心组件
4. 等待安装完成

**记录**：
```
安装位置：________________
版本号：________________
```

---

### 任务 2：连接 Webshell（20 分钟）

**前提**：你已经在 DVWA 上传了 shell.php

**蚁剑配置**：
1. 右键空白区域 → 添加数据
2. 填写：
   - URL：`http://dvwa地址/hackable/uploads/shell.php`
   - 密码：`cmd`（你在一句话木马里设置的）
   - 编码器：选择 `default`
3. 点击测试连接
4. 成功后双击进入

**记录**：
```
连接状态：________________
看到的目录：________________
```

---

### 任务 3：文件管理（20 分钟）

**蚁剑功能体验**：

1. **浏览目录**：双击文件夹进入
2. **下载文件**：右键 → 下载
3. **上传文件**：右键 → 上传
4. **编辑文件**：右键 → 编辑
5. **删除文件**：右键 → 删除

**尝试**：
- 浏览 `/etc/passwd`（Linux）或 `C:\Windows\win.ini`（Windows）
- 下载一个配置文件
- 上传一个测试文件

**记录**：
```
/etc/passwd 内容（前几行）：
________________
________________
```

---

### 任务 4：执行命令（20 分钟）

**蚁剑虚拟终端**：
1. 右键 Shell → 虚拟终端
2. 输入命令，观察输出

**尝试以下命令**：

```bash
# 基本信息
whoami
id
uname -a
cat /etc/passwd

# 网络信息
ifconfig
netstat -an

# 进程信息
ps aux
```

**记录**：
```
当前用户：________________
系统版本：________________
IP 地址：________________
```

---

## 今日闯关检查

| 检查项 | 分数 |
|--------|------|
| 成功安装蚁剑 | 15 分 |
| 成功连接 Webshell | 25 分 |
| 浏览服务器文件 | 20 分 |
| 执行系统命令 | 20 分 |
| 理解后渗透概念 | 20 分 |

**60 分及格，80 分优秀，100 分满分**

你的得分：____

---

## 底层补课

### 常见 Webshell 管理工具

| 工具 | 特点 | 适用场景 |
|------|------|----------|
| **蚁剑 (AntSword)** | 开源、跨平台、插件丰富 | 日常渗透 |
| **中国菜刀** | 经典老牌、体积小 | 简单场景 |
| **冰蝎 (Behinder)** | 流量加密、绕 WAF | 对抗环境 |
| **哥斯拉 (Godzilla)** | Java 开发、功能强 | 免杀需求 |

### 蚁剑核心功能

```
蚁剑
├── 文件管理器
│   ├── 浏览/上传/下载/编辑/删除
│   └── 批量操作
├── 虚拟终端
│   └── 执行系统命令
├── 数据库管理
│   └── 连接 MySQL/MSSQL 等
└── 插件市场
    └── 各种扩展功能
```

### 什么是后渗透？

**后渗透 (Post-Exploitation)** = GetShell 之后的所有操作

```
渗透测试流程：
信息收集 → 漏洞发现 → 漏洞利用 → GetShell → 后渗透
                                           ↓
                               ┌───────────────────┐
                               │ 信息收集         │
                               │ 权限提升         │
                               │ 内网横向         │
                               │ 持久化           │
                               │ 痕迹清理         │
                               └───────────────────┘
```

### 后渗透信息收集

**拿到 Shell 后第一步：了解环境**

| 类别 | Linux 命令 | Windows 命令 |
|------|------------|--------------|
| 当前用户 | `whoami` | `whoami` |
| 用户列表 | `cat /etc/passwd` | `net user` |
| 系统信息 | `uname -a` | `systeminfo` |
| 网络信息 | `ifconfig` / `ip a` | `ipconfig /all` |
| 进程列表 | `ps aux` | `tasklist` |
| 服务列表 | `systemctl list-units` | `net start` |
| 计划任务 | `crontab -l` | `schtasks` |

### 权限提升概念

**为什么需要提权？**

你拿到的 Shell 可能只是普通用户（如 www-data），权限有限。提权就是变成 root/SYSTEM。

**常见提权方式**：
- SUID 提权（Linux）
- 内核漏洞提权
- 配置错误提权
- 密码复用

（详细内容会在后续课程学习）

### 持久化概念

**为什么需要持久化？**

你的 Webshell 可能被删除、服务可能重启。持久化确保你能再次进入。

**常见方式**：
- 添加用户
- 计划任务
- 启动项
- SSH 公钥

---

## 避坑指南

| 坑点 | 症状 | 解决方案 |
|------|------|----------|
| 连接失败 | 返回空 | 检查 URL 和密码是否正确 |
| 编码问题 | 乱码 | 调整编码器设置 |
| 命令不回显 | 没输出 | 可能被禁用了函数 |
| 被杀软拦截 | 蚁剑打不开 | 添加信任或换工具 |

---

## 知识卡片速查

### 蚁剑快速配置

```
URL: http://target/shell.php
密码: cmd
编码器: default
连接类型: PHP
```

### 后渗透信息收集命令

```bash
# Linux 一键信息收集
whoami && id && uname -a && cat /etc/passwd && ifconfig

# Windows 一键信息收集
whoami & net user & systeminfo & ipconfig /all
```

### 蚁剑常用操作

| 操作 | 方法 |
|------|------|
| 添加 Shell | 右键空白 → 添加数据 |
| 虚拟终端 | 右键 Shell → 虚拟终端 |
| 文件管理 | 双击 Shell 进入 |
| 数据库 | 右键 Shell → 数据库管理 |

---

## 常见问题

**Q1：蚁剑和菜刀有什么区别？**

A1：
- 蚁剑是开源的，菜刀不是
- 蚁剑跨平台，菜刀只有 Windows
- 蚁剑有插件系统，功能更丰富
- 蚁剑还在更新，菜刀已经很老了

**Q2：为什么用蚁剑而不是直接 curl？**

A2：
- 图形界面更方便
- 文件管理更直观
- 可以保存多个 Shell
- 支持数据库操作

**Q3：后渗透最重要的是什么？**

A3：**信息收集**。了解环境才能决定下一步。盲目操作可能打草惊蛇。

---

## 明日预告

**Day 028：Week 4 周末闯关**

明天你将：
- 综合运用本周所学
- 完成 XSS + 文件上传组合攻击
- 输出本周学习总结

---

## 学习记录

| 项目 | 内容 |
|------|------|
| 实际学习日期 | |
| 蚁剑连接成功 | 是/否 |
| 命令执行成功 | 是/否 |
| 今日收获 | |

---

> **导师点评**：
>
> 今天你学会了"用工具"。一句话木马 + 蚁剑，这是最经典的组合。
>
> 但记住，工具只是手段。重要的是拿到 Shell 后你知道该干什么。
>
> 信息收集 → 提权 → 横向 → 持久化，这是后渗透的基本路线。
>
> 你现在只是入门，但这条路的尽头，是完全控制整个内网。
>
> **有本事进去，更要有本事全身而退**。

```bash
echo "Day 027 Complete! Webshell 管理 GET！"
```
