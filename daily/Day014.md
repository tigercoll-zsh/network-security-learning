# Day014：安全协议与加密 - 第 2 周综合实验与测评（傻瓜版能照做）

- 日期：2026-01-07
- 周次：第2周

## 学习目标

今天是“收口日”，学完你应该能做到：

- 把本周四个主题串成一条线：
	- DNS（Day005）→ HTTP（Day006）→ Wireshark（Day007）→ TLS/证书/HTTPS（Day008–Day010）→ SSH（Day011）→ 加密基础（Day012–Day013）
- 把“证据”收集齐：截图、过滤器、关键输出
- 写出一份能复盘的周报：别人看了也能照着复现

## 本周知识点回顾（你要会用，不要死背）

### 1️⃣ 证据意识：每次实验都要留下什么

- 命令行输出（复制关键行）
- Wireshark 过滤器 + 一张关键截图
- 结论（你想证明的是什么）

### 2️⃣ 这周最容易混淆的点（你要主动纠正）

- HTTPS 抓包看不到明文不是“抓不到”，而是“看到了加密后的内容”
- 证书链验证不是“看见证书就行”，要检查：
	- 域名匹配、有效期、是否受信任、链是否完整
- SSH 的 `known_hosts`（信任服务器）和 `authorized_keys`（允许谁登录）千万别写反
- 密码存储不是“加密存”，而是“慢哈希(KDF)+salt+参数”

## 实践任务（合法授权范围内）

> 你只要按下面 4 个小任务做完，本周就算“真的掌握”。

### 任务 1（必做）：TLS/HTTPS 抓包证据（选一个站点即可）

1. 打开 Wireshark 抓包
2. 访问一个 HTTPS 站点（例如你常用的）
3. 用过滤器定位握手：

```wireshark
tls.handshake
```

4. 截图至少 2 张：

- ClientHello/ServerHello（能看到 SNI 更好）
- Certificate（证书消息）

### 任务 2（必做）：证书链检查证据（用 Windows 命令即可）

用 `curl.exe` 看一眼握手/证书相关输出（只要关键行）：

```powershell
curl.exe -Iv https://example.com
```

> 你要留下的证据：
>
>- “Connected to …”
>- “SSL certificate verify ok.”（或失败原因）
>- ALPN 协商（如果有）

### 任务 3（必做）：SSH 本地密钥与 config 证据（不需要远程主机）

- 证明你有密钥文件：

```powershell
Get-ChildItem "$env:USERPROFILE\.ssh" | Select-Object Name
```

- 证明你有 `config` 并写了 alias（如果有）：

```powershell
Test-Path "$env:USERPROFILE\.ssh\config"
```

### 任务 4（可选，强烈推荐）：PBKDF2 演示（Day013 的可选任务 2）

跑一遍 PBKDF2 脚本，截图对比 sha256 与 pbkdf2 的耗时差异。

## 巩固练习（题与复盘）

### 题 1：做一个 5 分钟讲解提纲（必写）

从下面 4 个里选 1 个写提纲：

- A. “为什么 HTTPS 抓包仍然有价值”（即使看不到明文）
- B. “证书链到底在验证什么”
- C. “SSH 的 known_hosts vs authorized_keys”
- D. “为什么密码要用 KDF，而不是 sha256”

要求：

- 5 个要点
- 1 个类比
- 1 个你本周踩过的坑

### 题 2：本周错题/易错点清单（至少 5 条）

把你本周“差点搞错”的点列出来，并写一句纠正。

## 评估标准（达成判定）

- 周报包含：目标、证据、过滤器/命令、结论、反思、下周计划
- 至少完成 3 个“必做任务”的证据收集
- 题 1 的讲解提纲结构清晰，别人照着也能讲

## 学习成果达成情况（周报模板，直接填写）

### 1) 本周我完成了什么（用一句话总述）

- 

### 2) 关键证据清单（把截图文件名列出来）

- TLS 握手截图：
- 证书截图：
- curl 输出截图：
- SSH 密钥/config 证据：
- PBKDF2 输出截图（可选）：

### 3) 我本周最重要的 10 行记录（命令/过滤器/输出）

1. 
2. 
3. 

### 4) 结论与反思（必须写）

- 我本周真正理解了：
- 我本周最大的坑是：
- 我下周要避免的是：

### 5) 下周计划（3 条即可）

1. 
2. 
3. 

## 集中参考答案（含思路）

### 题 1 参考提纲（给你一个可照抄版本）

以 A 题为例《为什么 HTTPS 抓包仍然有价值》：

1. 抓包能看到握手：TLS 版本、Cipher、SNI、证书消息
2. 能定位失败原因：证书验证失败、握手告警、版本不兼容
3. 能看性能线索：连接建立次数、重传、RTT（虽然看不到明文）
4. 能发现协议选择：ALPN 是否协商到 h2、是否走 QUIC（UDP 443）
5. 能做合规与排错：确认是否全站 HTTPS、是否有异常重定向

类比：

- “你看不到车里的人说什么，但你能看到车牌、路线、速度、堵不堵。”

踩坑示例：

- “我以为抓不到明文是 Wireshark 坏了，其实是 TLS 正常工作。”

### 题 2 参考答案（示例 5 条，可扩展）

1. 把签名当成加密：签名是防篡改/证明身份，不一定保密。
2. 把 known_hosts 写到服务器：known_hosts 是客户端文件。
3. 用 SHA-256 直接存密码：应该用 KDF（PBKDF2/bcrypt/Argon2…）。
4. HTTPS 抓包无法验证证书：其实能看到证书消息与握手告警。
5. 证书“有效”就是安全：还要看域名匹配、链是否完整、撤销状态等。

## 周报示例填写（可照抄）

### 1) 总述（示例）

- 我完成了 HTTPS/TLS 抓包、证书链检查、SSH 密钥配置与 KDF 基础演示，并整理了一份可复现实验周报。

### 2) 关键证据（示例）

- TLS：`images/day014_tls_handshake.png`
- 证书：`images/day014_tls_certificate.png`
- curl：`images/day014_curl_iv.png`
- SSH：`images/day014_ssh_files.png`
- PBKDF2：`images/day014_pbkdf2.png`

### 4) 反思（示例）

- 我最大的坑是把“签名/加密/哈希”混成一团；现在知道它们目标不同，组合使用才是现代安全协议。
