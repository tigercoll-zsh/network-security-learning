---
title: Day007：网络与协议基础 - HTTPS 与加密基础
tags:
  - 网络
  - 安全
  - 学习计划
categories:
  - 网络安全
abbrlink: 75b7e
date: 2026-01-29
updated: 2026-01-29
---

# Day007：网络与协议基础 - HTTPS 与加密基础

- **日期**：2026-01-29
- **周次**：第 1 周
- **模块**：网络与协议基础
- **主题**：HTTPS 与加密基础
- **预计学习时间**：2.5 小时

---

## 🎯 学习目标

学完今天你应该能做到：

- 理解对称加密与非对称加密的区别
- 掌握 HTTPS 的 TLS 握手流程（重点）
- 能查看和分析网站的数字证书

<!--more-->

## 📚 完整学习内容（必读）

本节包含今天需要学习的全部知识点，请认真阅读并理解。

### 一、概念理解

#### 7.1.1 密码学基础
- **明文 (Plaintext)**：未加密的信息。
- **密文 (Ciphertext)**：加密后的信息。
- **密钥 (Key)**：加密和解密时使用的“钥匙”。
- **算法 (Algorithm)**：加密和解密的数学规则。

#### 7.1.2 对称加密 (Symmetric Encryption)
- **原理**：加密和解密使用**同一个**密钥。
- **比喻**：保险箱，你和朋友都有同一把钥匙。
- **优点**：速度快，效率高。
- **缺点**：密钥分发困难（怎么把钥匙安全地给朋友？）。
- **常见算法**：AES (常用), DES (淘汰), RC4 (淘汰)。

#### 7.1.3 非对称加密 (Asymmetric Encryption)
- **原理**：有一对密钥，**公钥 (Public Key)** 和 **私钥 (Private Key)**。
  - 公钥加密，私钥解密（用于传输机密数据）。
  - 私钥加密，公钥解密（用于数字签名）。
- **比喻**：邮箱。地址（公钥）是公开的，谁都能往里投信；但只有你有钥匙（私钥）能打开看。
- **优点**：解决了密钥分发问题。
- **缺点**：速度极慢（比对称加密慢几百倍）。
- **常见算法**：RSA, ECC (椭圆曲线)。

#### 7.1.4 摘要算法 (Hash)
- **原理**：将任意长度的数据生成固定长度的指纹。**不可逆**。
- **作用**：验证完整性（有没有被改过）。
- **常见算法**：MD5 (不安全), SHA-1 (不安全), SHA-256 (常用)。

### 二、原理讲解

#### 7.2.1 HTTPS 解决了 HTTP 的三个问题
1. **窃听风险**：HTTP 是明文 -> HTTPS 用加密解决。
2. **篡改风险**：HTTP 内容可能被改 -> HTTPS 用校验机制解决。
3. **冒充风险**：对方可能是钓鱼网站 -> HTTPS 用数字证书解决。

#### 7.2.2 数字证书与 CA
- **CA (Certificate Authority)**：数字证书认证机构，网络世界的“公安局”。
- **数字证书**：网站的“身份证”，包含：
  - 网站的公钥。
  - 网站的域名。
  - 有效期。
  - CA 的数字签名（防伪标识）。
- **信任链**：操作系统和浏览器内置了受信任的根 CA 列表。如果证书是根 CA 签发的，或者信任链能追溯到根 CA，浏览器就信任它。

#### 7.2.3 TLS 握手流程 (以 TLS 1.2 为例)
HTTPS = HTTP + TLS。在传输 HTTP 数据前，先进行 TLS 握手协商密钥。

1. **Client Hello**：客户端说：“我支持这些加密套件，给你一个随机数 1。”
2. **Server Hello**：服务端说：“好，我们用这套加密算法，给你一个随机数 2。”
3. **Certificate**：服务端：“这是我的身份证（证书），里面有我的公钥。”
4. **Key Exchange**：
   - 客户端验证证书合法性。
   - 生成一个**预主密钥 (Pre-Master Secret)**。
   - 用证书里的**公钥**加密这个预主密钥，发给服务端。
5. **生成会话密钥**：双方利用（随机数 1 + 随机数 2 + 预主密钥），各自算出相同的**会话密钥（Session Key）**。
6. **Finished**：双方说：“握手结束，后面用会话密钥进行对称加密通信。”

*注：TLS 1.3 简化了流程，速度更快。*

### 三、技术细节

#### 7.3.1 混合加密体制
HTTPS 结合了两种加密方式的优点：
- **握手阶段**：使用**非对称加密**（RSA/ECC）来安全地传输密钥。
- **传输阶段**：使用**对称加密**（AES）来快速地传输数据。

#### 7.3.2 证书验证过程
浏览器如何知道证书是真的？
1. 拿证书里的**签名算法**和**签名值**。
2. 用颁发者（CA）的**公钥**解密签名值，得到摘要 A。
3. 对证书内容计算摘要 B。
4. 如果 A == B，说明证书未被篡改，且确实是该 CA 签发的。
5. 检查域名是否匹配、是否过期、是否被吊销（CRL/OCSP）。

#### 7.3.3 HSTS (HTTP Strict Transport Security)
- 告诉浏览器：“以后访问我这个网站，强制只能用 HTTPS，不许用 HTTP”。
- 防止 SSL 剥离攻击。

### 四、进阶知识（选学）

#### 7.4.1 完美前向保密 (PFS)
- 传统 RSA 握手：如果私钥泄露，之前抓包的所有流量都能被解密。
- PFS (如 DHE/ECDHE 算法)：每次会话生成独立的临时密钥。即使长期私钥泄露，历史数据也无法破解。

#### 7.4.2 SSL/TLS 协议历史
- SSL 1.0/2.0/3.0：已废弃，有严重漏洞。
- TLS 1.0/1.1：已废弃。
- **TLS 1.2**：目前主流。
- **TLS 1.3**：最新标准，更快更安全。

#### 7.4.3 Let's Encrypt
- 一个免费、自动化、开放的 CA 机构。
- 推动了全球 HTTPS 的普及。

### 五、本日知识点速查表

| 序号 | 核心概念 | 关键点 | 备注 |
|------|----------|--------|------|
| 1 | 对称加密 | 同一密钥 | AES, 快 |
| 2 | 非对称加密 | 公钥/私钥 | RSA, 慢, 身份验证 |
| 3 | CA | 认证机构 | 发证书的 |
| 4 | TLS 握手 | 协商密钥 | 混合加密 |
| 5 | 公钥 | 公开 | 用于加密或验签 |
| 6 | 私钥 | 保密 | 用于解密或签名 |

---

## 🗺️ 知识图谱

### 今日内容在整体知识体系中的位置

```
网络安全学习路径
├── 第 1 周：网络与协议基础
│   ├── Day005：DNS 工作流
│   ├── Day006：HTTP 基础
│   └── Day007：HTTPS 与加密基础
│       ├── 核心概念：对称/非对称、CA、TLS
│       ├── 实践技能：证书分析、SSL 扫描
│       └── 关联知识点：PKI、HSTS
└── 后续衔接
    └── Day008：Linux 基础：常用命令与权限管理
```

### 今日关键词

`HTTPS` · `加密` · `证书` · `TLS` · `PKI`

---

## 🔧 实践任务（合法授权范围内）

> ⚠️ **安全提示**：所有任务必须在合法授权的实验环境中进行，禁止对未授权目标进行任何测试。

请按顺序完成以下任务：

### 任务 1：环境准备（5 分钟）

学会查看浏览器的小锁头：
1. 打开 Chrome/Edge。
2. 访问 `https://www.baidu.com`。
3. 点击地址栏左侧的“锁”图标 -> “连接是安全的” -> “证书有效”。

**操作步骤**：
1. 打开证书查看器。
2. 截图保存。

### 任务 2：核心实验（30 分钟）

深度解剖数字证书：
1. 在证书查看器中，查看以下字段：
   - **颁发给 (Subject)**：CN (Common Name) 是不是 `www.baidu.com`？
   - **颁发者 (Issuer)**：是谁签发的？（如 GlobalSign）。
   - **有效期 (Validity)**：什么时候过期？
   - **公钥 (Public Key)**：用的什么算法（RSA/ECC）？长度多少？
   - **指纹 (Fingerprint)**：证书的 Hash 值。
2. 查看**证书路径 (Certification Path)**：观察信任链，从根证书到中间证书再到站点证书。

**预期结果**：
- 结果 1：你能清晰地看到证书的层级结构。
- 结果 2：你会发现大多数网站的证书有效期只有 1 年甚至更短（为了安全）。

### 任务 3：进阶挑战（选做，15 分钟）

使用 Wireshark 抓取 TLS 握手包（Client Hello）：
1. 打开 Wireshark，开始捕获。
2. 访问 `https://www.baidu.com`。
3. 过滤器输入 `tls.handshake.type == 1` (Client Hello)。
4. 查看 `Cipher Suites`（加密套件），看看你的浏览器支持多少种加密组合。

---

## 📝 巩固练习（题目与复盘）

完成以下练习来检验你的学习效果。

### 练习 1：概念理解（5 分钟）

用通俗的语言解释为什么 HTTPS 比 HTTP 安全。

**参考答案**（完成后对照）：
HTTP 就像寄明信片，谁都能看、能改。HTTPS 就像寄保险箱，只有通过身份认证（证书）的收件人有钥匙（私钥）能打开，而且路上没人能换掉箱子里的东西（完整性校验）。

### 练习 2：实操应用（10 分钟）

如果你的浏览器提示“您的连接不是私密连接”（证书错误），可能是什么原因？列举 3 种。

**参考答案**（完成后对照）：
1. **证书过期**：网站管理员忘了续费。
2. **域名不匹配**：证书是发给 a.com 的，你访问了 b.com。
3. **自签名证书**：证书是网站自己画的，不是 CA 发的，浏览器不认。
4. **系统时间不对**：你的电脑时间错了，导致误判证书过期。

### 练习 3：深度思考（10 分钟）

HTTPS 通信中，私钥如果泄露了会发生什么？

**参考答案**（完成后对照）：
- 攻击者可以伪装成该网站（中间人攻击）。
- 如果没有开启完美前向保密（PFS），攻击者可以解密过去抓获的所有加密流量。

---

## ✅ 评估标准（达成判定）

请对照以下标准检查你的学习成果：

- [x] 能分清公钥和私钥的作用（公钥加密，私钥解密）
- [x] 知道 CA 是干什么的
- [x] 能看懂浏览器证书信息

### 自检清单

完成学习后，请检查以下项目：

- [ ] **概念理解**：能画出 TLS 握手的大致流程
- [ ] **实际应用**：能检查网站证书是否有效
- [ ] **动手能力**：能看到 Client Hello 包
- [ ] **时间管理**：能在 2.5 小时内完成今日学习内容

### 学习进度自评

| 评估项目 | 1-5 星 | 备注 |
|----------|--------|------|
| 概念理解 | ⭐⭐⭐⭐⭐ | 混合加密搞懂了吗？ |
| 动手能力 | ⭐⭐⭐⭐⭐ | 看到证书链了吗？ |
| 时间控制 | ⭐⭐⭐⭐⭐ | 握手流程是否太复杂？ |
| 学习兴趣 | ⭐⭐⭐⭐⭐ | 第一周网络基础通关！ |

---

## 📊 学习成果记录（由学习者填写）

### 学习信息

| 项目 | 内容 |
|------|------|
| 学习日期 | 2026-01-29 |
| 学习时长 | ___ 小时 |
| 完成情况 | ⬜ 已完成 / ⬜ 部分完成 / ⬜ 未完成 |

### 实践任务完成记录

| 任务 | 完成状态 | 关键证据/截图 | 用时 |
|------|----------|---------------|------|
| 任务 1 | ⬜ 已完成 / ⬜ 部分 / ⬜ 未做 | 截图：小锁头详情 | ___ 分钟 |
| 任务 2 | ⬜ 已完成 / ⬜ 部分 / ⬜ 未做 | 记录：证书颁发者 | ___ 分钟 |
| 任务 3 | ⬜ 已完成 / ⬜ 部分 / ⬜ 未做 | 截图：Client Hello | ___ 分钟 |

### 命令/代码记录

```bash
# 记录你今天使用的命令
# Linux 下查看证书
openssl s_client -connect www.baidu.com:443 -showcerts
```

### 今日总结与反思

**今日收获**（用 3-5 句话总结今天学到了什么）：

_例如：今天完成了第一周的学习！搞懂了 HTTPS 原来是 HTTP + TLS。知道了非对称加密虽然安全但太慢，所以只用来传密钥。学会了看证书，以后看到证书报错知道怎么排查了。_

**遇到的问题与解决**：

_例如：TLS 握手流程步骤有点多，结合图解多看几遍才明白。_

**明日待深化的问题**：

_例如：除了 Web，其他协议（如邮件、FTP）也能用 TLS 加密吗？（答案是肯定的，如 SMTPS, FTPS）。_

---

## 💡 知识卡片速查

### 核心概念速记

| 概念 | 定义 | 举例 |
|------|------|------|
| **HTTPS** | 安全的 HTTP | 运钞车 |
| **RSA** | 非对称加密算法 | 公钥/私钥 |
| **AES** | 对称加密算法 | 相同的钥匙 |
| **CA** | 证书授权中心 | 数字身份证颁发局 |

### 常用命令速查

| 场景 | 命令 (Linux) | 说明 |
|------|--------------|------|
| 检查证书 | `openssl s_client -connect <host>:443` | 查看服务器证书链 |
| 生成密钥 | `openssl genrsa -out key.pem 2048` | 生成私钥 |

### 常见错误与解决

| 错误现象 | 可能原因 | 解决方法 |
|----------|----------|----------|
| NET::ERR_CERT_DATE_INVALID | 证书过期或系统时间错 | 检查时间，联系管理员 |
| NET::ERR_CERT_AUTHORITY_INVALID | 自签名或根证书缺失 | 信任该证书（风险自负） |

---

## ❓ 常见问题与解答

**Q1：公钥和私钥到底谁加密谁解密？**

A1：
- **加密模式**：公钥加密，私钥解密。（为了保密，只有你能看）
- **签名模式**：私钥加密（签名），公钥解密（验签）。（为了证明是你发的）

**Q2：HTTPS 会变慢吗？**

A2：会一点点。主要是在建立连接时的 TLS 握手阶段（多了几次 RTT 和 CPU 计算）。一旦握手完成，进入对称加密传输阶段，速度几乎没有影响。现代硬件对 AES 都有指令集加速，影响微乎其微。

**Q3：什么是中间人攻击 (MITM)？**

A3：黑客夹在你和服务器中间。你发给服务器的消息，黑客先截获，解密（如果是 HTTP），修改，再发给服务器。HTTPS 通过证书验证防止了这一点，因为黑客拿不出合法的证书。

---

## 🚀 下一步学习预告

**明日主题预告**：Day008 - Linux 基础：常用命令与权限管理

**学习重点预告**：
- Linux 目录结构
- 文件操作命令 (ls, cd, cp, mv)
- 权限管理 (chmod, chown)
- 管道与重定向

**第一周总结与第二周展望**：
- 恭喜你完成了**网络与协议基础**模块！你已经掌握了互联网通信的底层语言（OSI, IP, TCP, HTTP, DNS, HTTPS）。
- 第二周我们将进入 **Linux 系统安全** 模块，这是黑客和安全专家的主战场。准备好你的终端，我们要开始敲命令了！

---

## 📖 参考资料

- 📖 官方文档：[RFC 5246 - TLS 1.2](https://tools.ietf.org/html/rfc5246)
- 🎥 视频教程：B站搜索 "HTTPS 工作原理"
- 🛠️ 实践工具：[Qualys SSL Labs](https://www.ssllabs.com/ssltest/) (在线检查网站 HTTPS 安全等级)
- 📚 参考书籍：《图解密码技术》 (非常有趣，推荐)

---

> 💬 **学习提示**：
> 1. 建议按照文档顺序学习，不要跳跃
> 2. 每个知识点理解后再进行下一步
> 3. 实践任务一定要亲手做，不要只看
> 4. 遇到问题先思考，再查阅资料，最后再问
> 5. 坚持每天完成学习任务并记录成果，90 天后你会感谢现在的自己！
>
> ```bash
> git add daily/Day007.md
> git commit -m "Day007: 完成学习与记录"
> ```
